function shuffle(o){for(var e,t,a=o.length;a;)t=Math.floor(Math.random()*a--),e=o[a],o[a]=o[t],o[t]=e;return o}for(var localQ=localStorage.q?JSON.parse(localStorage.q):[],qi=-1,localNextQ=0,lq=0,i=0;i<localQ.length;i++)localQ[i][0]==q_id&&(qi=i),localQ[i][0]==q_id&&(localNextQ=lq),lq=localQ[i][0];function chgQtype(o){1==available&&(1==o?localStorage.qType=o:localStorage.removeItem("qType"),setTimeout(function(){location.href=""},100))}if(0==available){var audio=document.getElementById("audio");$("#content a").css({"pointer-events":"none"}),$("#app").css({opacity:available})}function playing(){0==available&&(audio.play(),$("#app").css({opacity:1}),setTimeout(function(){$("#content a").css({"pointer-events":""}),available=1},2e3))}function playingAudio(){1==available&&audio&&audio.play()}var app=new Vue({el:"#app",delimiters:["[[","]]"],data:{preChoices:[cho0,cho1,cho2,cho3],choices:shuffle([[0,cho0,"background-color: #F5F5F5;"],[1,cho1,"background-color: #F5F5F5;"],[2,cho2,"background-color: #F5F5F5;"],[3,cho3,"background-color: #F5F5F5;"]]),choiceTxt:"",circle:!1,cross:!1,CorrectUsr:[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],IncorrectUsr:[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],AnswerCalc:[],Comment:[],commentTxt:"",commented:!1},methods:{choose:function(o){if(1==available){available=2,this.$set(this.choices[o],[2],"background-color: grey;");var e=0;0==app.choices[o][0]&&(e=1),setTimeout(function(){for(var t=0;t<app.choices.length;t++)0==app.choices[t][0]?app.choices[t][2]="background-color: lime;":o==t?app.choices[o][2]="background-color:red;opacity:0.5;":app.choices[t][2]="opacity:0.2;";UIeffect(e)},1e3),-1==qi?posting(e,0):e-localQ[qi][6]==1&&posting(e,1),saveLocal(e)}},describe:function(o){if(1==available){available=2;var e=0;this.choiceTxt==this.preChoices[0]&&(e=1),setTimeout(function(){UIeffect(e)},1e3),-1==qi?posting(e,0):e-localQ[qi][6]==1&&posting(e,1),saveLocal(e)}},commenting:function(o){var e={csrf:csrf,comment_txt:this.commentTxt,question_id:q_id,usr_img:etoColor?"":myphoto};$.post("/CommentAdd/",e,function(){},"json").always(function(o){1==o.Status?location.href="":console.log(o)})}}});function answerShow(){var o={csrf:csrf,q:q_id};$.get("/AnswerShow/",o,function(){},"json").always(function(o){1==o.Status?(app.CorrectUsr=o.CorrectUsr,app.IncorrectUsr=o.IncorrectUsr,app.AnswerCalc=o.AnswerCalc,app.Comment=o.Comment,csrf=o.CSRF):console.log(o)})}answerShow();var audio_correct=document.getElementById("audio_correct"),audio_incorrect=document.getElementById("audio_incorrect");function UIeffect(o){var e=app.AnswerCalc[0]*app.AnswerCalc[1]/100;app.AnswerCalc[1]++,1==o?(app.circle=!0,audio_correct.play(),app.CorrectUsr.unshift([myphoto,"background-color:#"+etoColor]),e++):(app.cross=!0,audio_incorrect.play(),app.IncorrectUsr.unshift([myphoto,"background-color:#"+etoColor])),app.AnswerCalc[0]=Math.round(e/app.AnswerCalc[1]*100),setTimeout(function(){localNextQ>0?location.href="/quiz/?q="+localNextQ:$("#nextQ").attr("href")&&"/quiz/?q=0"!=$("#nextQ").attr("href")&&(location.href=$("#nextQ").attr("href"))},1e3)}function saveLocal(o){var e=[q_id,$("#question_txt").html().replace(/<br>/g,"\n"),app.preChoices,$("#reference").html()?$("#reference").html():"",0,"{{.Q.QuestionImg}}",o,$("#explanation").html().replace(/<br>/g,"\n")];if(qi>-1?localQ[qi]=e:localQ.unshift(e),localQ.length>199){var t=localQ.length-200;localQ.splice(-t,t)}localStorage.q=JSON.stringify(localQ);var a=localStorage.daily?JSON.parse(localStorage.daily):{},c=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate();for(var r in a[c]&&a[c][1]?(a[c][1]++,1==o&&a[c][0]++):a[c]=[o,1],a)r.split("-")[1]!=(new Date).getMonth()+1&&r.split("-")[1]!=(new Date).getMonth()&&delete a[r];localStorage.daily=JSON.stringify(a)}function posting(o,e){$.cookie("cat","{{.Q.CategoryID}}",{expires:7,path:"/"});var t={csrf:csrf,question_id:q_id,question_txt:$("#question_txt").html().replace(/<br>/g,"").substr(0,50),category_id:"{{.Q.CategoryID}}",respondent_img:etoColor?"":myphoto,correct:o,update:e};$.post("/Answer/",t,function(){},"json").always(function(o){})}